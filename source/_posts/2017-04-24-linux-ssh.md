---
title: Linux记录之ssh
date: 2017-04-24
updated: 2017-04-25
category: 
- Technology
- Linux
tags:
- Linux
- ssh
---

## 名称
ssh — — OpenSSH SSH 客户端（远程登录程序）

## 概要
```
ssh [-1246AaCfGgKkMNnqsTtVvXxYy] 
    [-b bind_address] [-c cipher_spec]
    [-D [bind_address:]port] [-E log_file] [-e escape_char]
    [-F configfile] [-I pkcs11] [-i identity_file]
    [-J [user@]host[:port]] [-L address] [-l login_name] [-m mac_spec]
    [-O ctl_cmd] [-o option] [-p port] [-Q query_option] [-R address]
    [-S ctl_path] [-W host:port] [-w local_tun[:remote_tun]]
    [user@]hostname [command]
```

## 描述
ssh (SSH客户端) 是一个登录到远程机器的程序，在远程机器上执行命令。它旨在通过不安全的网络在两个不受信任的主机之间提供安全的加密通信。X11连接，任意TCP端口和UNIX域套接字也可以通过安全通道转发。

ssh连接并登录到指定的主机名（具有可选的用户名）。用户必须使用以下几种方法之一向远程机器证明他/她的身份（见下文）。

如果指定了命令，它将在远程机器执行。

选项如下：


#####  -1

> 强制ssh只尝试协议版本1.

##### -2

> 强制ssh只尝试协议版本2.

##### -4

> 强制ssh只使用IPv4.

##### -6

> 强制ssh只使用IPv6.

##### -A

> 启用认证代理连接的转发。这也可以在配置文件中的每个主机的基础上进行指定。

> 应该小心启用代理转发。能够绕过远程主机的文件权限的用户（对于代理的UNIX域套接字）可以通过转发的连接访问本地代理。 攻击者无法从代理获取密钥资料，但是他们可以对密钥执行操作，使其能够使用加载到代理中的身份进行身份验证。

##### -a

> 禁用认证代理连接的转发。

##### -b  bind_address

> 在本地机器上使用bind_address作为连接的源地址。 仅对具有多个地址的系统有用。

##### -C

> 请求压缩所有数据（包括stdin，stdout，stderr和转发的X11，TCP和UNIX域连接的数据）。 压缩算法与gzip使用的压缩算法相同，“级别”可以由协议版本1的CompressionLevel选项控制。调制解调器线路和其他慢速连接需要压缩，但在快速网络上只会减慢。 默认值可以在配置文件中逐个主机设置; 请参阅压缩选项。

##### -c  cipher_spec

> 选择加密会话的密码规范。 协议版本1允许指定单个密码。 支持的值为“3des”，“blowfish”和“des”。 对于协议版本2，cipher_spec是以优先级顺序列出的以逗号分隔的密码列表。 有关详细信息，请参阅ssh_config中的Ciphers关键字。

##### -D  [bind_address:]port

> 指定本地“动态”应用级端口转发。 这可以通过分配一个套接字来侦听本地端口，可选地绑定到指定的bind_address。 无论何时连接到该端口，连接将通过安全通道转发，然后应用程序协议用于确定从远程机器连接到何处。 目前支持SOCKS4和SOCKS5协议，ssh将作为SOCKS服务器。 只有root可以转发特权端口。 动态端口转发也可以在配置文件中指定。

> 可以通过将地址括在方括号中来指定IPv6地址。 只有超级用户可以转发特权端口。 默认情况下，根据GatewayPorts设置绑定本地端口。 但是，可以使用显式的bind_address将连接绑定到特定的地址。 “localhost”的bind_address表示侦听端口仅限于本地使用，而空的地址或“*”表示端口应该从所有接口可用。

##### -E  log_file

> 将调试日志追加到log_file而不是标准错误。

##### -e  escape_char

> 使用pty（默认值：’〜’）设置会话的转义字符。转义字符只能在行的开始处被识别。 转义字符后跟一个点（’.’）关闭连接; 其次是control-Z挂起连接; 然后自己发送一次转义字符。 将字符设置为“无”可禁用任何转义，并使会话完全透明。

##### -F  configfile

> 指定一个替代每个用户的配置文件。 如果在命令行中给出了一个配置文件，系统范围的配置文件（/ etc / ssh / ssh_config）将被忽略。 每个用户配置文件的默认值为〜/ .ssh / config。

##### -f

> 请求ssh在命令执行之前转到后台。 如果ssh要求密码或密码短语，但用户在后台需要它时，这很有用。 这与 -n 参数相同。 在远程站点启动X11程序的推荐方法是像ssh -f host xterm。

> 如果ExitOnForwardFailure配置选项设置为“yes”，则以-f开头的客户端将在将其自身置于后台之前等待所有远程端口转发成功建立。