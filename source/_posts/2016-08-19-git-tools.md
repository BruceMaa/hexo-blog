---
title: Gitä½¿ç”¨è®°å½•ï¼å·¥å…·ç¯‡
categories: Technology
tags:
- Git
---

# Gitå‘½ä»¤ä½¿ç”¨è®°å½•ï¼æ¥æºè‡ª[å®˜æ–¹æ–‡æ¡£][guanfangwendang]

## é€‰æ‹©ä¿®è®¢ç‰ˆæœ¬

### ç®€çŸ­çš„ SHA-1

> æŸ¥çœ‹æ¯æ¬¡æäº¤ç®€çŸ­çš„SHA-1å€¼

```
git log --abbrev-commit --pretty=oneline
```
	
> å‡è®¾æŸä¸ªæäº¤æ˜¯``1c002dd....``ï¼Œå¦‚æœä½ æƒ³``git show``è¿™ä¸ªæäº¤ï¼Œä¸‹é¢ä¸‰ä¸ªå‘½ä»¤æ˜¯ç­‰ä»·çš„ï¼ˆå‡è®¾ç®€çŸ­çš„ç‰ˆæœ¬æ²¡æœ‰æ­§ä¹‰ï¼‰

```
git show 1c002dd4b536e7479fe34593e72e6c6c1819e53b
git show 1c002dd4b536e7479f
git show 1c002dd
```

<!-- more -->
	
### åˆ†æ”¯å¼•ç”¨

> å¦‚æœæƒ³æŸ¥çœ‹æŸä¸ªåˆ†æ”¯çš„æœ€åä¸€æ¬¡æäº¤ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨``rev-parse``æ¢æµ‹å‡ºè¯¥åˆ†æ”¯çš„æœ€åä¸€æ¬¡SHA-1å€¼

```
git rev-parse <branchName>
```
	
> ç„¶åå†``git show``æ‰“å°å‡ºçš„SHA-1å€¼

### å¼•ç”¨æ—¥å¿—

```
git reflog
```
	
> å¦‚æœæƒ³æŸ¥çœ‹ä»“åº“ä¸­HEADåœ¨äº”æ¬¡å‰çš„æ‰€æŒ‡å‘çš„æäº¤

```
git show HEAD@{5}
```
	
> å¦‚æœæƒ³æŸ¥çœ‹``master``åˆ†æ”¯åœ¨æ˜¨å¤©çš„æ—¶å€™æŒ‡å‘äº†å“ªä¸ªæäº¤

```
git show master@{yesterday}
```
	
> å¼•ç”¨æ—¥å¿—åªå­˜åœ¨äºæœ¬åœ°ä»“åº“ï¼Œå¦‚æœæŸ¥è¯¢çš„æ—¶é—´æ—©äºæœ¬åœ°æœ€æ—©æ“ä½œæ—¶é—´ï¼Œåˆ™ä¼šæ˜¾ç¤ºç¬¬ä¸€æ¬¡æ“ä½œè®°å½•
> 
> å¯ä»¥è¿è¡Œ``git log -g``æ¥æŸ¥çœ‹ç±»ä¼¼äº``git log``è¾“å‡ºæ ¼å¼çš„å¼•ç”¨æ—¥å¿—ä¿¡æ¯

```
git log -g master
```
	
### ç¥–å…ˆå¼•ç”¨

> æŸ¥çœ‹``HEAD``çš„ä¸Šä¸€ä¸ªæäº¤ï¼Œä¹Ÿå°±æ˜¯â€œHEADçš„çˆ¶æäº¤â€ï¼Œä¸‹é¢ä¸¤ä¸ªå‘½ä»¤ç­‰ä»·

```
git show HEAD^
git show HEAD~
```
	
> æŸ¥çœ‹``HEAD``çš„ç¬¬äºŒçˆ¶æäº¤

```
git show HEAD^2
```
	
> æŸ¥çœ‹``HEAD``çš„ç¬¬ä¸€çˆ¶æäº¤çš„ç¬¬ä¸€çˆ¶æäº¤ï¼Œä¸‹é¢ä¸¤ä¸ªå‘½ä»¤ç­‰ä»·

```
git show HEAD^^
git show HEAD~2
```
	
### æäº¤åŒºé—´

#### åŒç‚¹

> æŸ¥çœ‹``experiment``åˆ†æ”¯ä¸­è¿˜æœ‰å“ªäº›æäº¤å°šæœªè¢«åˆå¹¶å…¥``master``åˆ†æ”¯

```
git log master..experiment
```
	
> æŸ¥çœ‹``master``åˆ†æ”¯ä¸­å­˜åœ¨ï¼Œè€Œ``experiment``åˆ†æ”¯ä¸­ä¸å­˜åœ¨çš„æäº¤ï¼Œä¸‹é¢ä¸‰ä¸ªå‘½ä»¤ç­‰ä»·

```
git log experiment..master
git log ^experiment master
git log master --not experiment
```
	
> å¦‚æœåœ¨``..``çš„æŸä¸€è¾¹ç•™ç©ºï¼Œåˆ™é»˜è®¤ä¸º``HEAD``

#### å¤šç‚¹

> æŸ¥çœ‹æ‰€æœ‰è¢«``refA``æˆ–``refB``åŒ…å«çš„ä½†æ˜¯ä¸è¢«``refC``åŒ…å«çš„æäº¤ï¼Œä¸‹é¢ä¸¤ä¸ªå‘½ä»¤ç­‰ä»·

```
git log refA refB ^refC
git log refA refB --not refC
```
	
#### ä¸‰ç‚¹

> æŸ¥çœ‹``master``æˆ–è€…``experiment``ä¸­åŒ…å«çš„ä½†ä¸æ˜¯ä¸¤è€…å…±æœ‰çš„æäº¤

```
git log master...experiment
```
	
> å¦‚æœåŠ ä¸Šå‚æ•°``--left-right``ï¼Œä¼šæ˜¾ç¤ºæ¯ä¸ªæäº¤åˆ°åº•å¤„äºå“ªä¸€ä¾§çš„åˆ†æ”¯

```
git log --left-right master...experiment
```
	
	
## äº¤äº’å¼æš‚å­˜

> å¦‚æœè¿è¡Œ``git add``æ—¶ä½¿ç”¨``-i``æˆ–è€…``--interactive``é€‰é¡¹ï¼ŒGitå°†ä¼šè¿›å…¥äº¤äº’å¼ç»ˆç«¯æ¨¡å¼

```
git add -i
git add --interactive
```
	
## å‚¨è—ä¸æ¸…ç†

> å¦‚æœæƒ³è¦åˆ‡æ¢åˆ†æ”¯ï¼Œä½†æ˜¯ä¸æƒ³æäº¤ä¹‹å‰ä¿®æ”¹çš„æ–‡ä»¶ï¼Œè¿™æ—¶éœ€è¦ç”¨åˆ°å‚¨è—

```
git stash
git stash save
```
	
> è¿™æ—¶å°±å¯ä»¥è½»æ˜“çš„åˆ‡æ¢åˆ†æ”¯å¹¶åœ¨å…¶ä»–åœ°æ–¹å·¥ä½œï¼Œå¦‚æœæƒ³è¦æŸ¥çœ‹å‚¨è—

```
git stash list
```
	
> å¦‚æœæƒ³è¦é‡æ–°åº”ç”¨å‚¨è—ï¼Œæ‰§è¡ŒğŸ‘‡å‘½ä»¤ï¼Œå¦‚æœä¸æŒ‡å®šä¸€ä¸ªå‚¨è—ï¼Œåˆ™é»˜è®¤æœ€è¿‘ä¸€ä¸ª

```
git stash apply
git stash apply stash@{2}
```
	
> é‡æ–°åº”ç”¨åï¼Œä¹‹å‰æš‚å­˜çš„æ–‡ä»¶å¹¶æ²¡æœ‰é‡æ–°æš‚å­˜ï¼Œè¿™æ—¶éœ€è¦``--index``é€‰é¡¹

```
git stash apply --index
```
	
> é‡æ–°åº”ç”¨åï¼Œå †æ ˆä¸Šçš„å‚¨è—å¹¶ä¸ä¼šåˆ é™¤ï¼Œå¯ä»¥ä½¿ç”¨åˆ é™¤å‘½ä»¤

```
git stash drop stash@{2}
```

> å¦‚æœæƒ³è¦å°†å‚¨è—é‡æ–°åº”ç”¨åç«‹å³ä»æ ˆä¸Šåˆ é™¤ï¼Œå¯ä»¥ä½¿ç”¨ğŸ‘‡çš„å‘½ä»¤

```
git stash pop
```
	
> å¦‚æœä¸æƒ³å‚¨è—å·²æš‚å­˜çš„æ–‡ä»¶ï¼Œéœ€è¦``--keep-index``é€‰é¡¹

```
git stash save --keep-index
```

> å¦‚æœæƒ³å‚¨è—æœªè·Ÿè¸ªæ–‡ä»¶ï¼Œéœ€è¦``--include-untracked``æˆ–``-u``é€‰é¡¹

```
git stash save -u
```

> å¦‚æœæŒ‡å®šäº†``--patch``æ ‡è®°ï¼ŒGitä¼šäº¤äº’å¼çš„æç¤ºå‚¨è—

```
git stash --patch
```

### ä»å‚¨è—åˆ›å»ºä¸€ä¸ªåˆ†æ”¯

> å¦‚æœé‡æ–°åº”ç”¨å‚¨è—æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å†²çªï¼Œè¿™æ—¶å¯èƒ½ä¼šæƒ³åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œå¹¶åœ¨æ–°åˆ†æ”¯ä¸Šé‡æ–°åº”ç”¨å‚¨è—

```
git stash branch <branchName>
```

### æ¸…ç†å·¥ä½œç›®å½•

> ç§»é™¤æ‰€æœ‰æœªè¢«å¿½ç•¥å¹¶ä¸”æœªè¢«è¿½è¸ªçš„æ–‡ä»¶ï¼Œéå¸¸å±é™©ï¼

```
git clean
```

> æ›´å®‰å…¨ä¸€äº›çš„å‘½ä»¤ï¼Œå°†æ‰€æœ‰æ–‡ä»¶å‚¨è—

```
git stash --all
```

> ``git clean``çš„ä¸€äº›é€‰é¡¹
>> æŸ¥çœ‹``git clean``å°†ä¼šåšä»€ä¹ˆï¼Œ``-n``
>
```
git clean -n
```

>> ç§»é™¤å·¥ä½œç›®å½•ä¸­æ‰€æœ‰æœªè¿½è¸ªçš„æ–‡ä»¶ä»¥åŠç©ºçš„å­ç›®å½•ï¼Œ``-d``
>
```
git clean -n -d
```
	
>> å¼ºåˆ¶ç§»é™¤ï¼Œç¡®å®šç§»é™¤ï¼Œ``-f``
>
```
git clean -n -d -f
```
	
>> ç§»é™¤``.gitignore``æ–‡ä»¶å¿½ç•¥çš„æ–‡ä»¶ç±»å‹ï¼Œ``-x``
>
```
git clean -n -d -x -f
```

>> ä»¥äº¤äº’æ¨¡å¼è¿è¡Œcleanå‘½ä»¤ï¼Œ``-i``
>
```
git clean -x -i
```
	

## ç‰¹æ®Šåˆå¹¶

### åˆå¹¶æŸä¸ªåˆ†æ”¯ä¸Šçš„å•ä¸ªcommit

> å‡è®¾å°†featureåˆ†æ”¯ä¸Šçš„commit`fdb7b6`åˆå¹¶åˆ°masteråˆ†æ”¯ï¼Œä¸åˆå¹¶å…¶å®ƒcommit:

> å…ˆæŸ¥æ‰¾æƒ³è¦åˆå¹¶çš„commitçš„SHAï¼1å€¼ï¼›
> 
> å†checkoutåˆ°æƒ³è¦åˆå¹¶çš„åˆ†æ”¯ï¼›

```
git checkout master
```

> æœ€åæ‰§è¡Œ`cherry-pick`å‘½ä»¤:

```
git cherry-pick fdb7b6
```

### åˆå¹¶æŸä¸ªåˆ†æ”¯ä¸Šçš„ä¸€ç³»åˆ—commits

> å‡è®¾å°†featureåˆ†æ”¯ä¸Šçš„commit`fdb7b6 `è‡³`d46ee6`åˆå¹¶åˆ°masteråˆ†æ”¯
> 
> é¦–å…ˆï¼Œåœ¨featureåˆ†æ”¯åŸºç¡€ä¸Šåˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œå¹¶ä¸”æŒ‡æ˜æœ€åä¸€ä¸ªcommit

```
git checkout -b newBranch d46ee6
```

> ç„¶åï¼Œä½¿ç”¨``rebase``å‘½ä»¤åˆå¹¶åˆ°masteråˆ†æ”¯ï¼Œè¦æŒ‡æ˜åˆå¹¶å¼€å§‹çš„commit

```
git rebase --onto master fdb7b6^
```


	
```
to be continue...
```










[guanfangwendang]: https://git-scm.com/book/zh/v2 "ä¸­æ–‡æ–‡æ¡£"
